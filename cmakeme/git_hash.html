
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>git_hash &mdash; cmakeme 0.1.0</title>

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/cmake.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="_static/cmake-favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="cmakeme_sphinx" href="cmakeme_sphinx.html" />
  
 

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cmakeme_sphinx.html" title="cmakeme_sphinx"
             accesskey="P">previous</a> |</li>
  <li>
    <img src="_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://omnid.github.io/">Omnid</a> &#187;
  </li>
  <li>
    <a href="index.html">cmakeme</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">git_hash</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="git-hash">
<h1>git_hash<a class="headerlink" href="#git-hash" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Generate git hashes for project source code and access them via constants
defined in header files. You can retrieve the SHA1 hash that git uses for the 
current commit, the SHA1 hash of any subset of files, and the current commit status
(dirty or clean).</p>
</div></blockquote>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>This module is included with <code class="docutils literal notranslate"><span class="pre">find_package(cmakeme)</span></code> and will automatically
generate a header file called <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_git_hash.h</span></code>.</p>
<p>To use from your project (called <code class="docutils literal notranslate"><span class="pre">myprojecct</span></code>)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="cpf">&quot;myproject/myproject_git_hash.h&quot;</span><span class="cp"></span>
<span class="c1">// my_project_git_hash.h provides the following defines:</span>
<span class="cp">#define GIT_HASH_HEAD  </span><span class="c1">// The SHA1 hash of the HEAD of the git repository</span>
<span class="cp">#define GIT_HASH_DIRTY </span><span class="c1">// True if there are tracked files that have not been committed</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_git_hash.h</span></code> sparingly because every file that includes it is recompiled
every build.</p>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<dl class="cmake command">
<dt id="command:cmakeme_hash">
<code class="sig-name descname">cmakeme_hash</code><a class="headerlink" href="#command:cmakeme_hash" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">cmakeme_hash(target)</span></code> function hashes the files used for the specified target and its dependencies</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmakeme_hash(</span><span class="nb">target</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">target</span></code> The name of the target to hash.  The hash is the SHA1 hash of all the source files for the target and its dependencies.</p>
<p>For example, if the project name is <code class="docutils literal notranslate"><span class="pre">myproject</span></code> and the target name is <code class="docutils literal notranslate"><span class="pre">mytarget</span></code>,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="cpf">&quot;myproject/mytarget_git_hash.h&quot;</span><span class="cp"></span>
<span class="c1">// The above incldue does the following</span>
<span class="cp">#include</span><span class="cpf">&quot;myproject/myproject_git_hash.h&quot;</span><span class="c1"> // git hashes for the overall project</span><span class="cp"></span>
<span class="cp">#define GIT_HASH_mytarget </span><span class="c1">// git hash for the specified target</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Include sparingly, as any file that includes the header file is recompiled every time you build.</p>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">git_hash</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cmakeme_sphinx.html"
                        title="previous chapter">cmakeme_sphinx</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/git_hash.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cmakeme_sphinx.html" title="cmakeme_sphinx"
             >previous</a> |</li>
  <li>
    <img src="_static/cmake-logo-16.png" alt=""
         style="vertical-align: middle; margin-top: -2px" />
  </li>
  <li>
    <a href="https://omnid.github.io/">Omnid</a> &#187;
  </li>
  <li>
    <a href="index.html">cmakeme</a> &#187;
  </li>

        <li class="nav-item nav-item-this"><a href="">git_hash</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021 by Matthew Elwin.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>